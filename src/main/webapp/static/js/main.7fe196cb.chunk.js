(this.webpackJsonpsecure_chat=this.webpackJsonpsecure_chat||[]).push([[0],{19:function(e,t,a){e.exports=a(42)},24:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(17),c=a.n(r),l=(a(24),a(7)),o=a(18),i=a(3),u=a(4),m=a(6),p=a(5),h=function(e){return s.a.createElement("input",{autoFocus:!0,className:e.className||"inputPrompt",name:"command",onChange:e.onUserPromptInputChange,onKeyPress:function(t){return"Enter"===t.key?e.onEnterPressed():null},value:e.command})},d=function(e){var t=null;return"log"===e.type&&(t=s.a.createElement("span",{className:"inputPrompt"},e.command)),s.a.createElement("p",{className:"userPrompt"},s.a.createElement("span",{className:"greenText"},e.firstname+(""!==e.lastname?"-":"")+e.lastname),"@",s.a.createElement("span",{className:"pinkText"},"secureChat"),s.a.createElement("span",{className:"lightblueText"},"$"),"log"!==e.type?s.a.createElement(h,e):null,t)},g=a(2),f=a.n(g),v=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={resp:""},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;f.a.post("http://localhost:8080/secure-chat-java/login",{email:this.props.command.split(" ")[1],password:this.props.command.split(" ")[2]}).then((function(t){t.data.userExist?(e.props.onLogin(t.data.firstname,t.data.lastname,t.data.uid),e.setState({resp:"Login successful"})):e.setState({resp:"Invalid username or password"})})).catch((function(t){console.log(t),e.setState({resp:"Something went wrong."})}))}},{key:"render",value:function(){return s.a.createElement(n.Fragment,null,s.a.createElement("p",null,"Authenticating..."),s.a.createElement("p",null,this.state.resp))}}]),a}(n.Component),E=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={resp:""},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;f.a.post("http://localhost:8080/secure-chat-java/signup",{firstname:this.props.command.split(" ")[1],lastname:this.props.command.split(" ")[2],email:this.props.command.split(" ")[3],password:this.props.command.split(" ")[4]}).then((function(t){t.data.userCreated?e.setState({resp:"User Created"}):e.setState({resp:"Invalid Inputs"})})).catch((function(t){console.log(t),e.setState({resp:"Something went wrong"})}))}},{key:"render",value:function(){return s.a.createElement(n.Fragment,null,s.a.createElement("p",null,"Creating your account..."),s.a.createElement("p",null,this.state.resp))}}]),a}(n.Component),j=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={resp:"",users:[]},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;f.a.get("http://localhost:8080/secure-chat-java/users").then((function(t){e.setState({users:t.data})})).catch((function(t){console.log(t),e.setState({resp:"Something went wrong."})}))}},{key:"render",value:function(){var e=null;return this.state.users!==[]&&(e=s.a.createElement("div",null,s.a.createElement("br",null),s.a.createElement("p",null,this.state.users.length," users found:"),this.state.users.map((function(e){return s.a.createElement("p",{key:e.id},e.firstName+"-"+e.lastName+" "+e.id)})))),s.a.createElement(n.Fragment,null,s.a.createElement("p",null,"Fetching users..."),e,this.state.resp)}}]),a}(n.Component),y=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={resp:"",chats:[],message:"",isChatting:!0},e.chatInputChangeHandler=function(t){var a=t.target.value;e.setState({message:a})},e.enterKeyPressedHandler=function(){if("exit"===e.state.message)return clearInterval(e.syncChat),void e.setState({isChatting:!1});f.a.post("http://localhost:8080/secure-chat-java/chat",{senderId:e.props.uid,receiverId:e.props.command.split(" ")[1],message:e.state.message}).then((function(t){f.a.get("http://localhost:8080/secure-chat-java/chat",{params:{senderId:e.props.uid,receiverId:e.props.command.split(" ")[1]}}).then((function(t){var a=e.state.chats.filter((function(t){return t.senderId!==e.props.uid})),n=[].concat(Object(l.a)(t.data),Object(l.a)(a));n.sort((function(e,t){return e.id>t.id?1:-1})),e.setState({chats:n,message:""})})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;f.a.get("http://localhost:8080/secure-chat-java/chat",{params:{senderId:this.props.uid,receiverId:this.props.command.split(" ")[1]}}).then((function(t){f.a.get("http://localhost:8080/secure-chat-java/chat",{params:{senderId:e.props.command.split(" ")[1],receiverId:e.props.uid}}).then((function(a){var n=[].concat(Object(l.a)(t.data),Object(l.a)(a.data));n.sort((function(e,t){return e.id>t.id?1:-1})),e.setState({chats:n})})).catch((function(t){e.setState({resp:"Something went wrong"})}))})).catch((function(t){e.setState({resp:"Something went wrong"})})),this.syncChat=setInterval((function(){f.a.get("http://localhost:8080/secure-chat-java/chat",{params:{senderId:e.props.command.split(" ")[1],receiverId:e.props.uid}}).then((function(t){console.log(t.data);var a=e.state.chats.filter((function(t){return t.senderId!==e.props.uid}));if(t.data.length!==a.length){var n=e.state.chats.filter((function(t){return t.senderId===e.props.uid})),s=[].concat(Object(l.a)(n),Object(l.a)(t.data));s.sort((function(e,t){return e.id>t.id?1:-1})),e.setState({chats:s})}})).catch((function(e){console.log(e)}))}),3e3)}},{key:"render",value:function(){var e=this;if(-1===this.props.uid)return s.a.createElement("p",null,"Please Login");var t=null;return this.state.chats!==[]&&(t=this.state.chats.map((function(t){return t.senderId===e.props.uid?s.a.createElement("div",{className:"chatMessageLeft",key:t.id},s.a.createElement("div",null,">>>"),s.a.createElement("p",null,t.message)):s.a.createElement("div",{className:"chatMessageRight",key:t.id},s.a.createElement("p",null,t.message),s.a.createElement("div",null,"<<<"))}))),s.a.createElement(n.Fragment,null,s.a.createElement("p",null,"Fetching chats..."),s.a.createElement("p",null,this.state.resp),s.a.createElement("div",{className:"chatbox"},t,s.a.createElement("div",{className:"chatMessageLeft"},this.state.isChatting?s.a.createElement(n.Fragment,null,s.a.createElement("div",null,">>>"),s.a.createElement(h,{className:"chatPrompt",onUserPromptInputChange:this.chatInputChangeHandler,onEnterPressed:this.enterKeyPressedHandler,command:this.state.message})):null)))}}]),a}(n.Component),b=function(e){switch(e.command.split(" ")[0]){case"login":return s.a.createElement(v,e);case"signup":return s.a.createElement(E,e);case"users":return s.a.createElement(j,null);case"chat":return s.a.createElement(y,e);default:return s.a.createElement("p",null,"Invalid command")}},I=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,c=new Array(r),u=0;u<r;u++)c[u]=arguments[u];return(e=t.call.apply(t,[this].concat(c))).state={firstname:"guest",lastname:"",uid:-1,email:"",command:"",promptHierarchy:[],result:"",logs:[],isAuthenticated:!1},e.inputChangeHandler=function(t){var a=t.target.value;e.setState(Object(o.a)({},t.target.name,a))},e.loginHandler=function(t,a,n){e.state.isAuthenticated||e.setState({isAuthenticated:!0,firstname:t,lastname:a,uid:n})},e.enterPressedHandler=function(){var t=e.state.firstname,a=e.state.lastname,r=e.state.command,c=e.state.uid,o=function(){return s.a.createElement(n.Fragment,null,s.a.createElement(d,{firstname:t,lastname:a,command:r,type:"log"}),""!==r?s.a.createElement(b,{command:r,onLogin:e.loginHandler,uid:c}):null)};e.setState((function(e){return{logs:[].concat(Object(l.a)(e.logs),[o]),command:""}}))},e}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(){this.logsEnd.scrollIntoView({behavior:"smooth"})}},{key:"render",value:function(){var e=this,t=null;return this.state.logs!==[]&&(t=this.state.logs.map((function(e,t){return s.a.createElement(e,{key:t})}))),s.a.createElement("div",{className:"App"},t,this.state.waitingForInput?null:s.a.createElement(d,{firstname:this.state.firstname,lastname:this.state.lastname,command:this.state.command,onUserPromptInputChange:this.inputChangeHandler,onEnterPressed:this.enterPressedHandler}),s.a.createElement("div",{ref:function(t){return e.logsEnd=t}}))}}]),a}(n.Component);c.a.render(s.a.createElement(I,null),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.7fe196cb.chunk.js.map